<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Sosyal Medya - Roxy Store</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap');
/* â”€â”€â”€ VARIABLES â”€â”€â”€ */
:root {
    --primary: #00D9FF;
    --secondary: #A855F7;
    --accent: #00FF88;
    --dark: #0A0A0F;
    --dark-2: #151520;
    --dark-3: #1F1F2E;
    --text: #FFFFFF;
    --text-gray: #A0A0B8;
    --text-muted: #6B6B80;
    --warning: #FFB800;
    --error: #FF6584;
    --border: rgba(0, 217, 255, 0.15);
}

/* â”€â”€â”€ RESET â”€â”€â”€ */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Poppins', sans-serif;
    background: var(--dark);
    color: var(--text);
    overflow-x: hidden;
    min-height: 100vh;
}

/* â”€â”€â”€ SIDEBAR â”€â”€â”€ */
.sidebar {
    position: fixed;
    top: 0; left: -280px;
    width: 280px; height: 100vh;
    background: var(--dark-3);
    border-right: 2px solid var(--border);
    z-index: 1000;
    display: flex; flex-direction: column;
    transition: left 0.35s ease;
    overflow: hidden;
}
.sidebar.open { left: 0; }

.sidebar-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 24px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
}
.logo { display: flex; align-items: center; gap: 12px; }
.logo-icon {
    width: 44px; height: 44px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px;
    box-shadow: 0 0 24px rgba(0,217,255,0.4);
}
.logo-text { display: flex; flex-direction: column; line-height: 1.2; }
.logo-main {
    font-size: 22px; font-weight: 900;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    background-clip: text;
}
.logo-sub { font-size: 10px; font-weight: 600; color: var(--text-gray); letter-spacing: 2px; }

.sidebar-close {
    background: none; border: none;
    color: var(--text-gray); font-size: 22px;
    cursor: pointer; padding: 6px; transition: color 0.3s;
}
.sidebar-close:hover { color: var(--primary); }

.sidebar-nav { flex: 1; min-height: 0; padding: 16px 0; overflow-y: auto; }
.nav-item {
    display: flex; align-items: center; gap: 14px;
    padding: 14px 20px;
    color: var(--text-gray); text-decoration: none;
    border-left: 3px solid transparent;
    transition: all 0.3s; font-weight: 500;
}
.nav-item i { font-size: 18px; width: 22px; }
.nav-item:hover { color: var(--primary); background: rgba(0,217,255,0.06); border-left-color: var(--primary); }
.nav-item.active { color: var(--primary); background: rgba(0,217,255,0.1); border-left-color: var(--primary); }

.sidebar-footer { flex-shrink: 0; padding: 16px; border-top: 1px solid rgba(255,255,255,0.05); overflow: hidden; }
.btn-support { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; box-sizing: border-box; padding: 13px 8px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border: none; border-radius: 12px; color: #0A0A0F; font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 14px; cursor: pointer; transition: all 0.3s; overflow: hidden; }
.btn-support:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(0,217,255,0.4); }

/* â”€â”€â”€ OVERLAY â”€â”€â”€ */
.overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 999; opacity: 0; visibility: hidden; transition: all 0.3s;
}
.overlay.active { opacity: 1; visibility: visible; }

/* â”€â”€â”€ MAIN â”€â”€â”€ */
.main-content { min-height: 100vh; display: flex; flex-direction: column; }

/* â”€â”€â”€ TOPBAR â”€â”€â”€ */
.topbar {
    position: sticky; top: 0; z-index: 100;
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 24px; height: 70px;
    background: rgba(21,21,32,0.98);
    border-bottom: 2px solid var(--border);
    backdrop-filter: blur(20px);
}
.topbar-left { display: flex; align-items: center; gap: 16px; }
.menu-toggle {
    background: none; border: none;
    color: var(--text); font-size: 22px;
    cursor: pointer; padding: 8px; transition: color 0.3s;
}
.menu-toggle:hover { color: var(--primary); }
.topbar-logo { display: flex; align-items: baseline; gap: 4px; }
.topbar-right { display: flex; align-items: center; gap: 16px; }

.user-balance {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 16px;
    background: rgba(0,217,255,0.1);
    border: 2px solid rgba(0,217,255,0.3);
    border-radius: 12px;
}
.user-balance i { color: var(--primary); font-size: 18px; }
.user-balance div { display: flex; flex-direction: column; }
.balance-label { font-size: 10px; font-weight: 600; color: var(--text-gray); text-transform: uppercase; letter-spacing: 0.5px; }
.balance-amount { font-size: 15px; font-weight: 800; color: var(--primary); }

.user-avatar { display: flex; align-items: center; gap: 10px; cursor: pointer; }
.user-avatar img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--primary); }
.user-avatar span { font-weight: 600; }

/* â”€â”€â”€ CONTAINER â”€â”€â”€ */
.container {
    flex: 1;
    max-width: 720px; width: 100%;
    margin: 0 auto;
    padding: 40px 24px 60px;
}

/* â”€â”€â”€ PAGE HEADER â”€â”€â”€ */
.page-header { margin-bottom: 36px; }
.page-header h1 {
    font-size: 30px; font-weight: 900;
    display: flex; align-items: center; gap: 12px;
    margin-bottom: 8px;
}
.page-header h1 i { color: var(--primary); }
.page-header p { color: var(--text-gray); font-size: 15px; }

/* â”€â”€â”€ FORM KARTI â”€â”€â”€ */
.form-card {
    background: var(--dark-3);
    border: 2px solid var(--border);
    border-radius: 20px;
    padding: 36px;
    margin-bottom: 24px;
    display: flex; flex-direction: column; gap: 28px;
}

/* â”€â”€â”€ FIELD GROUP â”€â”€â”€ */
.field-group { display: flex; flex-direction: column; gap: 10px; }

.field-label {
    display: flex; align-items: center; gap: 10px;
    font-size: 15px; font-weight: 700; color: var(--text);
}
.field-label i { color: var(--primary); font-size: 17px; }

.amount-hint {
    margin-left: auto;
    font-size: 12px; font-weight: 600;
    color: var(--text-muted);
}

/* â”€â”€â”€ CUSTOM SELECT â”€â”€â”€ */
.custom-select-wrapper { position: relative; }
.custom-select {
    width: 100%;
    padding: 16px 50px 16px 18px;
    background: var(--dark-2);
    border: 2px solid rgba(0,217,255,0.15);
    border-radius: 12px;
    color: var(--text);
    font-family: 'Poppins', sans-serif;
    font-size: 15px; font-weight: 500;
    cursor: pointer; appearance: none;
    -webkit-appearance: none; outline: none; transition: all 0.3s;
}
.custom-select:focus {
    border-color: var(--primary);
    background: rgba(0,217,255,0.06);
    box-shadow: 0 0 0 4px rgba(0,217,255,0.12);
}
.custom-select:disabled { opacity: 0.45; cursor: not-allowed; }
.custom-select option { background: var(--dark-3); color: var(--text); padding: 12px; font-size: 15px; }
.select-arrow {
    position: absolute; right: 18px; top: 50%;
    transform: translateY(-50%);
    color: var(--primary); font-size: 13px;
    pointer-events: none; transition: transform 0.3s;
}
.custom-select:focus + .select-arrow { transform: translateY(-50%) rotate(180deg); }

/* â”€â”€â”€ AMOUNT INPUT â”€â”€â”€ */
.amount-input {
    width: 100%;
    padding: 16px 18px;
    background: var(--dark-2);
    border: 2px solid rgba(0,217,255,0.15);
    border-radius: 12px;
    color: var(--text);
    font-family: 'Poppins', sans-serif;
    font-size: 16px; font-weight: 600;
    outline: none; transition: all 0.3s;
}
.amount-input:focus {
    border-color: var(--primary);
    background: rgba(0,217,255,0.06);
    box-shadow: 0 0 0 4px rgba(0,217,255,0.12);
}
.amount-input::placeholder { color: var(--text-muted); font-weight: 400; }

.amount-info {
    font-size: 13px; color: var(--text-gray);
    min-height: 18px;
}
.amount-info.error { color: var(--error); }
.amount-info.ok { color: var(--accent); }

/* â”€â”€â”€ FÄ°YAT KUTUSU â”€â”€â”€ */
.price-box {
    display: none;
    background: linear-gradient(135deg, rgba(0,217,255,0.12), rgba(168,85,247,0.12));
    border: 2px solid rgba(0,217,255,0.35);
    border-radius: 20px;
    padding: 28px 32px;
    margin-bottom: 24px;
    animation: popIn 0.35s ease;
}
.price-box.show { display: block; }

@keyframes popIn {
    from { opacity: 0; transform: scale(0.97); }
    to   { opacity: 1; transform: scale(1); }
}

.price-row {
    display: flex; align-items: center; justify-content: space-between;
    padding: 8px 0;
}
.price-label { font-size: 13px; font-weight: 600; color: var(--text-gray); text-transform: uppercase; letter-spacing: 0.5px; }
.price-unit { font-size: 15px; font-weight: 700; color: var(--text); }

.price-divider { height: 1px; background: rgba(0,217,255,0.2); margin: 12px 0; }

.total-row { margin-top: 4px; }
.price-total {
    font-size: 40px; font-weight: 900;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* â”€â”€â”€ MESAÄ° KARTI â”€â”€â”€ */
.schedule-card {
    display: none;
    align-items: center; gap: 18px;
    border-radius: 16px;
    padding: 22px 24px;
    margin-bottom: 24px;
    border: 2px solid;
    animation: popIn 0.35s ease;
}
.schedule-card.show { display: flex; }
.schedule-card.mesai-ici {
    background: rgba(0,255,136,0.08);
    border-color: rgba(0,255,136,0.4);
}
.schedule-card.mesai-disi {
    background: rgba(255,184,0,0.08);
    border-color: rgba(255,184,0,0.4);
}
.schedule-icon {
    width: 48px; height: 48px; border-radius: 12px; flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px;
}
.mesai-ici .schedule-icon { background: rgba(0,255,136,0.15); color: var(--accent); }
.mesai-disi .schedule-icon { background: rgba(255,184,0,0.15); color: var(--warning); }
.schedule-body h4 { font-size: 15px; font-weight: 700; margin-bottom: 4px; }
.mesai-ici .schedule-body h4 { color: var(--accent); }
.mesai-disi .schedule-body h4 { color: var(--warning); }
.schedule-body p { font-size: 13px; color: var(--text-gray); line-height: 1.5; }

/* â”€â”€â”€ SATIN AL â”€â”€â”€ */
.btn-buy {
    width: 100%;
    display: flex; align-items: center; justify-content: center; gap: 12px;
    padding: 20px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border: none; border-radius: 14px;
    color: #0A0A0F;
    font-family: 'Poppins', sans-serif;
    font-weight: 800; font-size: 18px;
    cursor: pointer; transition: all 0.3s;
}
.btn-buy:hover:not(:disabled) { transform: translateY(-3px); box-shadow: 0 16px 50px rgba(0,217,255,0.45); }
.btn-buy:disabled { opacity: 0.35; cursor: not-allowed; }
.btn-buy i { font-size: 19px; }

/* â”€â”€â”€ FOOTER â”€â”€â”€ */
.footer { background: var(--dark-3); border-top: 2px solid var(--border); padding: 24px; }
.footer-inner { max-width: 720px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
.footer-support p { font-size: 13px; color: var(--text-gray); margin-bottom: 10px; }
.footer-btns { display: flex; gap: 10px; }
.footer-btn { display: flex; align-items: center; gap: 7px; padding: 9px 18px; border-radius: 9px; text-decoration: none; font-weight: 600; font-size: 14px; transition: transform 0.3s; }
.footer-btn:hover { transform: translateY(-2px); }
.footer-btn.whatsapp { background: #25D366; color: #fff; }
.footer-btn.telegram { background: #0088CC; color: #fff; }
.footer-copy { color: var(--text-muted); font-size: 13px; }

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
@media (max-width: 768px) {
    .topbar { padding: 0 16px; }
    .user-avatar span { display: none; }
    .balance-label { display: none; }
    .container { padding: 28px 16px 60px; }
    .form-card { padding: 24px 20px; }
    .price-total { font-size: 32px; }
    .footer-inner { flex-direction: column; text-align: center; }
    .footer-btns { justify-content: center; }
}
@media (max-width: 480px) {
    .topbar-logo { display: none; }
    .page-header h1 { font-size: 24px; }
    .btn-buy { font-size: 16px; }
}

/* â”€â”€â”€ PLATFORM KARTLARI â”€â”€â”€ */
.platform-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
}

.platform-card {
    display: flex; flex-direction: column; align-items: center; gap: 10px;
    padding: 20px 16px;
    background: var(--dark-2);
    border: 2px solid var(--border);
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.3s;
    font-family: 'Poppins', sans-serif;
    font-size: 14px; font-weight: 700; color: var(--text);
}
.platform-card:hover {
    border-color: rgba(0,217,255,0.4);
    transform: translateY(-3px);
}
.platform-card.active {
    border-color: var(--primary);
    background: rgba(0,217,255,0.08);
    box-shadow: 0 0 20px rgba(0,217,255,0.15);
}
.platform-svg {
    width: 48px; height: 48px;
    border-radius: 12px;
}

/* â”€â”€â”€ SERVÄ°S KARTLARI â”€â”€â”€ */
.service-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
}
.service-card {
    display: flex; flex-direction: column; align-items: center; gap: 8px;
    padding: 16px 10px;
    background: var(--dark-2);
    border: 2px solid var(--border);
    border-radius: 14px;
    cursor: pointer; transition: all 0.3s;
    font-family: 'Poppins', sans-serif;
    font-size: 13px; font-weight: 700; color: var(--text);
}
.service-card:hover:not(:disabled) { border-color: rgba(0,217,255,0.4); transform: translateY(-2px); }
.service-card.active { border-color: var(--primary); background: rgba(0,217,255,0.08); box-shadow: 0 0 20px rgba(0,217,255,0.15); }
.service-card.maintenance { opacity: 0.4; cursor: not-allowed; }
.svc-icon  { font-size: 26px; }
.svc-label { font-size: 13px; font-weight: 700; }
.svc-price { font-size: 11px; color: var(--primary); font-weight: 600; }
.svc-badge { font-size: 10px; color: var(--text-muted); }

/* Bakiye hover efekti */
.user-balance:hover { border-color: var(--primary) !important; transform: translateY(-1px); transition: all 0.2s; }

/* Destek nav item */
.nav-divider {
    height: 1px;
    background: rgba(255,255,255,0.07);
    margin: 8px 16px;
}
.nav-item.nav-support {
    color: var(--primary);
    font-weight: 700;
}
.nav-item.nav-support:hover {
    background: rgba(0,217,255,0.1);
    border-left-color: var(--primary);
}

.link-group{margin-top:0;}
.url-input{width:100%;padding:14px 16px;background:#12121A;border:1.5px solid rgba(255,255,255,.08);border-radius:12px;color:#fff;font-family:Poppins,sans-serif;font-size:14px;outline:none;transition:border .2s;}
.url-input:focus{border-color:#00D9FF;}
.hint{font-size:12px;margin-top:6px;}
.hint.ok{color:#00FF88;} .hint.err{color:#FF6584;}
</style>
</head>
<body>
<div class="sidebar" id="sidebar">
<div class="sidebar-header"><div class="logo"><div class="logo-icon"><i class="fas fa-bolt"></i></div><div class="logo-text"><span class="logo-main">ROXY</span><span class="logo-sub">STORE</span></div></div><button class="sidebar-close" onclick="toggleSidebar()"><i class="fas fa-times"></i></button></div>
<nav class="sidebar-nav">
<a href="dashboard.html" class="nav-item"><i class="fas fa-home"></i><span>Ana Sayfa</span></a>
<a href="virtual-number.html" class="nav-item"><i class="fas fa-mobile-alt"></i><span>Sanal Numara</span></a>
<a href="social-media.html" class="nav-item active"><i class="fas fa-chart-line"></i><span>Sosyal Medya</span></a>
<a href="balance.html" class="nav-item"><i class="fas fa-wallet"></i><span>Bakiye Ekle</span></a>
<a href="reviews.html" class="nav-item"><i class="fas fa-star"></i><span>DeÄŸerlendirmeler</span></a>
<div class="nav-divider"></div>
<a href="support.html" class="nav-item nav-support"><i class="fas fa-headset"></i><span>Destek</span></a>
</nav></div>
<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<div class="main-content">
<div class="topbar">
<div class="topbar-left"><button class="menu-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button><div class="topbar-logo"><span class="logo-main">ROXY</span> <span class="logo-sub">STORE</span></div></div>
<div class="topbar-right">
<div class="user-balance" onclick="window.location.href='balance.html'" title="Bakiye Ekle"><i class="fas fa-wallet"></i><div><span class="balance-label">Bakiye</span><span class="balance-amount" id="userBalanceDisplay">0 â‚º</span></div></div>
<div class="user-avatar" onclick="window.location.href='profile.html'"><img id="userAvatar" src="https://ui-avatars.com/api/?name=U&background=00D9FF&color=fff" alt=""><span id="userName">KullanÄ±cÄ±</span></div>
</div></div>

<div class="container">
<div class="page-header"><h1><i class="fas fa-chart-line"></i> Sosyal Medya</h1><p>Instagram ve TikTok iÃ§in takipÃ§i, beÄŸeni ve izlenme hizmetleri</p></div>

<div class="form-card">
<div class="field-group">
<label class="field-label"><i class="fas fa-share-alt"></i> Platform SeÃ§</label>
<div class="custom-select-wrapper">
<select class="custom-select" id="apiSelect" onchange="onApiChange()">
<option value="">â€” SeÃ§iniz â€”</option>
<option value="instagram">ðŸ“¸ Instagram</option>
<option value="tiktok">ðŸŽµ TikTok</option>
</select>
<i class="fas fa-chevron-down select-arrow"></i>
</div>
</div>

<div class="field-group">
<label class="field-label"><i class="fas fa-cogs"></i> Servis SeÃ§</label>
<div class="custom-select-wrapper">
<select class="custom-select" id="serviceSelect" onchange="onServiceChange()" disabled>
<option value="">â€” Ã–nce platform seÃ§in â€”</option>
</select>
<i class="fas fa-chevron-down select-arrow"></i>
</div>
</div>

<div class="field-group" id="amountGroup" style="display:none;">
<label class="field-label"><i class="fas fa-sort-amount-up"></i> Miktar <span class="amount-hint" id="amountHint" style="font-size:11px;color:#A0A0B8;font-weight:400;margin-left:8px;"></span></label>
<input type="number" class="amount-input" id="amountInput" placeholder="Miktar girin..." oninput="onAmountChange()">
<div class="amount-info" id="amountInfo"></div>
</div>

<div class="field-group link-group" id="linkGroup" style="display:none;">
<label class="field-label"><i class="fas fa-link"></i> Hesap / GÃ¶nderi Linki</label>
<input type="url" class="url-input" id="linkInput" placeholder="https://instagram.com/hesap veya gÃ¶nderi linki..." oninput="onLinkChange()">
<div class="hint" id="linkInfo"></div>
</div>
</div>

<div class="price-box" id="priceBox">
<span class="price-label">Toplam Ãœcret</span>
<span class="price-total" id="priceTotal">0 â‚º</span>
</div>

<div class="schedule-card" id="scheduleCard">
<div class="schedule-icon" id="scheduleIcon"></div>
<div class="schedule-body">
<h4 id="scheduleTitle"></h4>
<p id="scheduleText"></p>
</div>
</div>

<button class="btn-buy" id="buyBtn" onclick="handleOrder()" disabled><i class="fas fa-shopping-cart"></i> SipariÅŸ Ver</button>
</div>

<footer class="footer"><div class="footer-inner"><div class="footer-support"><p>Destek</p><div class="footer-btns"><a href="https://wa.me/447795203704" target="_blank" class="footer-btn whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a><a href="https://t.me/roxysatici" target="_blank" class="footer-btn telegram"><i class="fab fa-telegram"></i> Telegram</a></div></div><p class="footer-copy">Â© 2026 Roxy Store</p></div></footer>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
<script>
var _app=firebase.apps.length?firebase.apps[0]:firebase.initializeApp({apiKey:"AIzaSyBf2A1GhEzruI_6lfCNbq4MsbU8hxFjoqI",authDomain:"roxy-store-67c53.firebaseapp.com",projectId:"roxy-store-67c53",storageBucket:"roxy-store-67c53.firebasestorage.app",messagingSenderId:"450502544206",appId:"1:450502544206:web:502d0200dc35ecacfc2c1f"});
var auth=firebase.auth(),db=firebase.firestore();
function formatPrice(n){return Math.round(n||0).toLocaleString('tr-TR')+' â‚º';}
function toggleSidebar(){document.getElementById('sidebar').classList.toggle('open');document.getElementById('overlay').classList.toggle('active');}
var RoxyUI={
  toast:function(msg,type,dur){dur=dur||3500;var colors={success:'#00FF88',error:'#FF6584',warning:'#FFB347',info:'#00D9FF'};var icons={success:'check-circle',error:'times-circle',warning:'exclamation-triangle',info:'info-circle'};var c=document.getElementById('_rt');if(!c){c=document.createElement('div');c.id='_rt';c.style.cssText='position:fixed;bottom:24px;right:24px;z-index:99999;display:flex;flex-direction:column;gap:10px;max-width:360px;';document.body.appendChild(c);}var t=document.createElement('div');t.style.cssText='display:flex;align-items:center;gap:12px;padding:14px 18px;background:#1F1F2E;border:1.5px solid '+(colors[type]||colors.info)+';border-radius:14px;font-family:Poppins,sans-serif;font-size:14px;color:#fff;box-shadow:0 8px 32px rgba(0,0,0,.5);';t.innerHTML='<i class="fas fa-'+(icons[type]||'info-circle')+'" style="color:'+(colors[type]||colors.info)+';flex-shrink:0;font-size:18px"></i><span>'+msg+'</span>';c.appendChild(t);setTimeout(function(){t.style.opacity='0';t.style.transform='translateY(8px)';t.style.transition='.3s';setTimeout(function(){t.remove();},300);},dur);},
  alert:function(title,msg,type){return new Promise(function(resolve){var icons={success:'check-circle',error:'times-circle',warning:'exclamation-triangle',info:'info-circle'};var colors={success:'#00FF88',error:'#FF6584',warning:'#FFB347',info:'#00D9FF'};var ov=document.createElement('div');ov.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:99998;display:flex;align-items:center;justify-content:center;padding:16px;';ov.innerHTML='<div style="background:#1A1A28;border:1.5px solid rgba(0,217,255,.2);border-radius:20px;padding:32px 28px;max-width:420px;width:100%;text-align:center;font-family:Poppins,sans-serif;"><div style="font-size:40px;margin-bottom:12px"><i class="fas fa-'+(icons[type||'info']||'info-circle')+'" style="color:'+(colors[type||'info']||colors.info)+'"></i></div><div style="font-size:18px;font-weight:800;margin-bottom:10px;color:#fff">'+title+'</div><div style="font-size:14px;color:#A0A0B8;line-height:1.7;margin-bottom:24px">'+msg+'</div><button id="_rAOk" style="padding:12px 36px;background:linear-gradient(135deg,#00D9FF,#A855F7);border:none;border-radius:12px;color:#0A0A0F;font-weight:800;font-size:15px;cursor:pointer;font-family:Poppins,sans-serif;">Tamam</button></div>';document.body.appendChild(ov);ov.querySelector('#_rAOk').onclick=function(){ov.remove();resolve();};});},
  confirm:function(title,msg,okL,cancelL,danger){return new Promise(function(resolve){var ov=document.createElement('div');ov.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:99998;display:flex;align-items:center;justify-content:center;padding:16px;';ov.innerHTML='<div style="background:#1A1A28;border:1.5px solid rgba(0,217,255,.2);border-radius:20px;padding:32px 28px;max-width:420px;width:100%;text-align:center;font-family:Poppins,sans-serif;"><div style="font-size:40px;margin-bottom:12px"><i class="fas fa-question-circle" style="color:#00D9FF"></i></div><div style="font-size:18px;font-weight:800;margin-bottom:10px;color:#fff">'+title+'</div><div style="font-size:14px;color:#A0A0B8;line-height:1.7;margin-bottom:24px">'+msg+'</div><div style="display:flex;gap:12px;justify-content:center;"><button id="_rCC" style="padding:12px 28px;background:transparent;border:1.5px solid rgba(255,255,255,.15);border-radius:12px;color:#A0A0B8;font-weight:700;cursor:pointer;font-family:Poppins,sans-serif;">'+(cancelL||'Ä°ptal')+'</button><button id="_rCO" style="padding:12px 28px;background:'+(danger?'linear-gradient(135deg,#FF6584,#cc3355)':'linear-gradient(135deg,#00D9FF,#A855F7)')+';border:none;border-radius:12px;color:#0A0A0F;font-weight:800;cursor:pointer;font-family:Poppins,sans-serif;">'+(okL||'Onayla')+'</button></div></div>';document.body.appendChild(ov);ov.querySelector('#_rCO').onclick=function(){ov.remove();resolve(true);};ov.querySelector('#_rCC').onclick=function(){ov.remove();resolve(false);};});}
};
function generateSMMId(){var d=new Date(),p=function(n){return String(n).padStart(2,'0');},dt=p(d.getDate())+p(d.getMonth()+1)+d.getFullYear(),ch='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',r='';for(var i=0;i<4;i++)r+=ch[Math.floor(Math.random()*ch.length)];return 'SMM-'+dt+'-'+r;}

var SVCS={instagram:{takipci:{label:'TakipÃ§i',ppk:100,min:200,max:10000},begeni:{label:'BeÄŸeni',ppk:80,min:500,max:50000},izlenme:{label:'Ä°zlenme',ppk:50,min:1000,max:100000}},tiktok:{takipci:{label:'TakipÃ§i',ppk:150,min:350,max:35000},begeni:{label:'BeÄŸeni',ppk:80,min:500,max:100000},izlenme:{label:'Ä°zlenme',ppk:40,min:1000,max:500000}}};
var _cu=null,_ud=null;
var _unsub=auth.onAuthStateChanged(function(user){_unsub();if(!user){window.location.href='auth.html';return;}
_cu=user;db.collection('users').doc(user.uid).get().then(function(s){_ud=s.exists?s.data():{};var n=_ud.name||user.displayName||'KullanÄ±cÄ±';document.getElementById('userBalanceDisplay').textContent=formatPrice(_ud.balance||0);document.getElementById('userAvatar').src='https://ui-avatars.com/api/?name='+encodeURIComponent(n)+'&background=00D9FF&color=fff';document.getElementById('userName').textContent=n;});});

function onApiChange(){var api=document.getElementById('apiSelect').value,sel=document.getElementById('serviceSelect');
sel.innerHTML='<option value="">â€” SeÃ§iniz â€”</option>';sel.disabled=!api;
document.getElementById('amountGroup').style.display='none';document.getElementById('linkGroup').style.display='none';
document.getElementById('priceBox').style.display='none';document.getElementById('scheduleCard').className='schedule-card';
document.getElementById('buyBtn').disabled=true;
if(!api||!SVCS[api])return;
Object.keys(SVCS[api]).forEach(function(k){var s=SVCS[api][k];var opt=document.createElement('option');opt.value=k;opt.textContent=s.label;sel.appendChild(opt);});}

function onServiceChange(){var api=document.getElementById('apiSelect').value,svc=document.getElementById('serviceSelect').value;
document.getElementById('amountInput').value='';document.getElementById('amountInfo').textContent='';
document.getElementById('priceBox').style.display='none';document.getElementById('scheduleCard').className='schedule-card';
document.getElementById('buyBtn').disabled=true;
if(!api||!svc){document.getElementById('amountGroup').style.display='none';document.getElementById('linkGroup').style.display='none';return;}
var s=SVCS[api][svc];
document.getElementById('amountHint').textContent='Min '+s.min.toLocaleString('tr-TR')+' â€“ Maks '+s.max.toLocaleString('tr-TR');
document.getElementById('amountInput').min=s.min;document.getElementById('amountInput').max=s.max;
document.getElementById('amountGroup').style.display='flex';document.getElementById('linkGroup').style.display='flex';}

function onAmountChange(){var api=document.getElementById('apiSelect').value,svc=document.getElementById('serviceSelect').value;
var amount=parseInt(document.getElementById('amountInput').value)||0,info=document.getElementById('amountInfo');
document.getElementById('priceBox').style.display='none';document.getElementById('scheduleCard').className='schedule-card';
document.getElementById('buyBtn').disabled=true;info.className='amount-info';info.textContent='';
if(!api||!svc||!amount)return;
var s=SVCS[api][svc];
if(amount<s.min){info.className='amount-info error';info.textContent='âš  En az '+s.min.toLocaleString('tr-TR')+' olmalÄ±';return;}
if(amount>s.max){info.className='amount-info error';info.textContent='âš  En fazla '+s.max.toLocaleString('tr-TR')+' olabilir';return;}
info.className='amount-info ok';info.textContent='âœ“ GeÃ§erli';
document.getElementById('priceTotal').textContent=formatPrice(Math.round((amount/1000)*s.ppk));
document.getElementById('priceBox').style.display='flex';
updateSched();checkBuy();}

function onLinkChange(){var v=document.getElementById('linkInput').value.trim(),el=document.getElementById('linkInfo');
if(v.length>5&&!v.startsWith('http')){el.className='hint err';el.textContent='âš  Link http:// ile baÅŸlamalÄ±';}
else if(v.length>5){el.className='hint ok';el.textContent='âœ“ Link girildi';}
else{el.className='hint';el.textContent='';}
checkBuy();}

function checkBuy(){var api=document.getElementById('apiSelect').value,svc=document.getElementById('serviceSelect').value;
var amount=parseInt(document.getElementById('amountInput').value)||0,link=document.getElementById('linkInput').value.trim();
var s=api&&svc?SVCS[api][svc]:null;
document.getElementById('buyBtn').disabled=!(s&&amount>=s.min&&amount<=s.max&&link.length>5);}

function isWorking(){var n=new Date(),day=n.getDay(),h=n.getHours();return day===0||day===6||h>=17;}
function updateSched(){var w=isWorking(),card=document.getElementById('scheduleCard');
card.className='schedule-card show '+(w?'mesai-ici':'mesai-disi');
document.getElementById('scheduleIcon').innerHTML=w?'<i class="fas fa-check-circle"></i>':'<i class="fas fa-moon"></i>';
document.getElementById('scheduleTitle').textContent=w?'Mesai Saatlerindeyiz âœ“':'Mesai Saati DÄ±ÅŸÄ±';
document.getElementById('scheduleText').innerHTML=w?'En geÃ§ 30 dk iÃ§inde baÅŸlar.':'Mesai saatlerinde baÅŸlayacaktÄ±r.';}

function handleOrder(){var api=document.getElementById('apiSelect').value,svc=document.getElementById('serviceSelect').value;
var amount=parseInt(document.getElementById('amountInput').value)||0,link=document.getElementById('linkInput').value.trim();
if(!api||!svc||!amount||!link)return;
var s=SVCS[api][svc],total=Math.round((amount/1000)*s.ppk),bal=_ud?(_ud.balance||0):0;
if(bal<total){RoxyUI.alert('Yetersiz Bakiye','Gerekli: <strong>'+formatPrice(total)+'</strong><br>Bakiyeniz: <strong>'+formatPrice(bal)+'</strong>','warning').then(function(){window.location.href='balance.html';});return;}
var oid=generateSMMId(),plat=api==='instagram'?'Instagram':'TikTok';
RoxyUI.confirm('SipariÅŸ Ã–zeti','Platform: <strong>'+plat+'</strong><br>Servis: <strong>'+s.label+'</strong><br>Miktar: <strong>'+amount.toLocaleString('tr-TR')+'</strong><br>Link: <strong>'+link.substring(0,35)+(link.length>35?'...':'')+ '</strong><br>Tutar: <strong>'+formatPrice(total)+'</strong><br>No: <strong>'+oid+'</strong>','Onayla','Ä°ptal').then(function(ok){
if(!ok)return;
var nb=bal-total;
db.collection('orders').doc(oid).set({orderId:oid,type:'smm',userId:_cu.uid,userEmail:_cu.email,userName:(_ud&&_ud.name)?_ud.name:'',platform:plat,service:s.label,amount:amount,link:link,price:total,status:'pending',note:'',createdAt:firebase.firestore.FieldValue.serverTimestamp()})
.then(function(){return db.collection('users').doc(_cu.uid).update({balance:nb});})
.then(function(){_ud.balance=nb;document.getElementById('userBalanceDisplay').textContent=formatPrice(nb);
RoxyUI.toast('SipariÅŸiniz alÄ±ndÄ±! No: '+oid,'success',5000);
document.getElementById('apiSelect').value='';document.getElementById('serviceSelect').value='';
document.getElementById('serviceSelect').disabled=true;document.getElementById('serviceSelect').innerHTML='<option value="">â€” Ã–nce platform seÃ§in â€”</option>';
document.getElementById('amountInput').value='';document.getElementById('linkInput').value='';
document.getElementById('amountInfo').textContent='';document.getElementById('linkInfo').textContent='';
document.getElementById('amountGroup').style.display='none';document.getElementById('linkGroup').style.display='none';
document.getElementById('priceBox').style.display='none';document.getElementById('scheduleCard').className='schedule-card';
document.getElementById('buyBtn').disabled=true;})
.catch(function(e){RoxyUI.alert('Hata','SipariÅŸ oluÅŸturulamadÄ±: '+e.message,'error');});});}
</script>
</body></html>